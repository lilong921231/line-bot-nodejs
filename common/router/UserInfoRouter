let UserEntity = require('../entity/UserEntity');
let UserInfoDataAccess = require('../dataAccess/UserInfoDataAccess');

let dataAccess = new UserInfoDataAccess();


function UserRouter(req, res) {
    const MailAddress = req.body.MailAddress || '';
    dataAccess.userInfo(MailAddress).then(data => {
        let dataJson;
        if(data.length !== 1) {
            dataJson = {start: '4', data: UserEntity, message: 'ユーザーの情報がありません。'};
        } else {
            dataJson = {start: '0', data: data};
        }
        res.json(dataJson);
    }).catch(err => {
        res.json({start: '9', message: err})
    });
}

module.exports = UserRouter;